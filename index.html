<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Vault - Password Keeper</title>
  
  <!-- PWA Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Vault">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#0a0a0a">
  
  <!-- App Icons -->
  <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'%3E%3Crect width='180' height='180' fill='%230a0a0a'/%3E%3Cpath d='M90 40 L90 140 M90 60 L110 60 L110 120 L70 120 L70 60 Z M80 60 L80 40 C80 28 100 28 100 40 L100 60' fill='none' stroke='%2300ff41' stroke-width='8' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2300ff41' stroke-width='2'%3E%3Cpath d='M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z'/%3E%3C/svg%3E">
  
  <!-- Web App Manifest -->
  <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlZhdWx0IC0gUGFzc3dvcmQgS2VlcGVyIiwKICAic2hvcnRfbmFtZSI6ICJWYXVsdCIsCiAgInN0YXJ0X3VybCI6ICIuIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjMGEwYTBhIiwKICAidGhlbWVfY29sb3IiOiAiIzBhMGEwYSIsCiAgImRlc2NyaXB0aW9uIjogIkVuY3J5cHRlZCBwYXNzd29yZCBtYW5hZ2VyIHdpdGggQUVTLTI1Ni1HQ00gZW5jcnlwdGlvbiIsCiAgIm9yaWVudGF0aW9uIjogInBvcnRyYWl0IiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxODAgMTgwJyUzRSUzQ3JlY3Qgd2lkdGg9JzE4MCcgaGVpZ2h0PScxODAnIGZpbGw9JyUyMzBhMGEwYScvJTNFJTNDcGF0aCBkPSdNOTAgNDAgTDkwIDE0MCBNOTA2MCBMMTEwIDYwIEwxMTAgMTIwIEw3MCAxMjAgTDcwIDYwIFonIGZpbGw9J25vbmUnIHN0cm9rZT0nJTIzMDBmZjQxJyBzdHJva2Utd2lkdGg9JzgnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcvJTNFJTNDL3N2ZyUzRSIsCiAgICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0sCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxODAgMTgwJyUzRSUzQ3JlY3Qgd2lkdGg9JzE4MCcgaGVpZ2h0PScxODAnIGZpbGw9JyUyMzBhMGEwYScvJTNFJTNDcGF0aCBkPSdNOTAgNDAgTDkwIDE0MCBNOTA2MCBMMTEwIDYwIEwxMTAgMTIwIEw3MCAxMjAgTDcwIDYwIFonIGZpbGw9J25vbmUnIHN0cm9rZT0nJTIzMDBmZjQxJyBzdHJva2Utd2lkdGg9JzgnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcvJTNFJTNDL3N2ZyUzRSIsCiAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdCn0=">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&display=swap');
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'JetBrains Mono', 'Courier New', monospace;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
      min-height: 100vh;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
      -webkit-user-select: none;
      user-select: none;
    }
    
    input, textarea {
      -webkit-user-select: text;
      user-select: text;
    }
    
    /* Prevent pull-to-refresh on mobile */
    body {
      overscroll-behavior-y: contain;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.5;
      }
    }
    
    @keyframes scanline {
      0% {
        transform: translateY(-100%);
      }
      100% {
        transform: translateY(100%);
      }
    }
    
    .unlock-container {
      animation: fadeInUp 0.8s ease-out;
    }
    
    .shield-icon {
      animation: pulse 3s ease-in-out infinite;
    }
    
    .scanline {
      position: absolute;
      width: 100%;
      height: 2px;
      background: linear-gradient(transparent, #00ff41, transparent);
      animation: scanline 4s linear infinite;
      pointer-events: none;
      opacity: 0.3;
    }
    
    .hidden {
      display: none !important;
    }
    
    input, textarea, button {
      font-family: 'JetBrains Mono', 'Courier New', monospace;
    }
    
    button {
      transition: all 0.3s ease;
    }
    
    button:hover {
      transform: translateY(-2px);
    }
    
    .entry-card {
      transition: all 0.3s ease;
    }
    
    .entry-card:hover {
      border-color: #00ff41 !important;
      box-shadow: 0 0 20px rgba(0, 255, 65, 0.1);
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script>
    // Encryption utilities
    async function encryptData(data, password) {
      const enc = new TextEncoder();
      const keyMaterial = await crypto.subtle.importKey(
        'raw',
        enc.encode(password),
        { name: 'PBKDF2' },
        false,
        ['deriveBits', 'deriveKey']
      );
      
      const salt = crypto.getRandomValues(new Uint8Array(16));
      const key = await crypto.subtle.deriveKey(
        {
          name: 'PBKDF2',
          salt: salt,
          iterations: 100000,
          hash: 'SHA-256'
        },
        keyMaterial,
        { name: 'AES-GCM', length: 256 },
        false,
        ['encrypt']
      );
      
      const iv = crypto.getRandomValues(new Uint8Array(12));
      const encrypted = await crypto.subtle.encrypt(
        { name: 'AES-GCM', iv: iv },
        key,
        enc.encode(data)
      );
      
      const encryptedArray = new Uint8Array(encrypted);
      const result = new Uint8Array(salt.length + iv.length + encryptedArray.length);
      result.set(salt, 0);
      result.set(iv, salt.length);
      result.set(encryptedArray, salt.length + iv.length);
      
      return btoa(String.fromCharCode(...result));
    }

    async function decryptData(encryptedData, password) {
      try {
        const enc = new TextEncoder();
        const dec = new TextDecoder();
        
        const data = Uint8Array.from(atob(encryptedData), c => c.charCodeAt(0));
        const salt = data.slice(0, 16);
        const iv = data.slice(16, 28);
        const encrypted = data.slice(28);
        
        const keyMaterial = await crypto.subtle.importKey(
          'raw',
          enc.encode(password),
          { name: 'PBKDF2' },
          false,
          ['deriveBits', 'deriveKey']
        );
        
        const key = await crypto.subtle.deriveKey(
          {
            name: 'PBKDF2',
            salt: salt,
            iterations: 100000,
            hash: 'SHA-256'
          },
          keyMaterial,
          { name: 'AES-GCM', length: 256 },
          false,
          ['decrypt']
        );
        
        const decrypted = await crypto.subtle.decrypt(
          { name: 'AES-GCM', iv: iv },
          key,
          encrypted
        );
        
        return dec.decode(decrypted);
      } catch (e) {
        throw new Error('Decryption failed - incorrect password');
      }
    }

    // SVG Icons
    const icons = {
      lock: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>',
      unlock: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path></svg>',
      eye: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>',
      eyeOff: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>',
      plus: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>',
      copy: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>',
      trash: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>',
      search: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>',
      shield: '<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>',
      shieldSmall: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>'
    };

    // State
    let state = {
      isUnlocked: false,
      masterPassword: '',
      entries: [],
      showMasterPassword: false,
      searchTerm: '',
      showAddForm: false,
      visiblePasswords: {},
      copiedId: null,
      error: '',
      newEntry: {
        title: '',
        username: '',
        password: '',
        url: '',
        category: '',
        notes: ''
      }
    };

    // Load entries
    async function loadEntries() {
      const encrypted = localStorage.getItem('passwordVault');
      if (encrypted) {
        try {
          const decrypted = await decryptData(encrypted, state.masterPassword);
          state.entries = JSON.parse(decrypted);
          render();
        } catch (e) {
          console.error('Failed to decrypt vault');
        }
      }
    }

    // Save entries
    async function saveEntries(newEntries) {
      const encrypted = await encryptData(JSON.stringify(newEntries), state.masterPassword);
      localStorage.setItem('passwordVault', encrypted);
      state.entries = newEntries;
      render();
    }

    // Handle unlock
    async function handleUnlock() {
      if (!state.masterPassword) {
        state.error = 'Please enter your master password';
        render();
        return;
      }
      
      const encrypted = localStorage.getItem('passwordVault');
      if (encrypted) {
        try {
          await decryptData(encrypted, state.masterPassword);
          state.isUnlocked = true;
          state.error = '';
          await loadEntries();
          render();
        } catch (e) {
          state.error = 'Incorrect master password';
          render();
        }
      } else {
        // First time setup
        state.isUnlocked = true;
        state.error = '';
        render();
      }
    }

    // Handle lock
    function handleLock() {
      state = {
        isUnlocked: false,
        masterPassword: '',
        entries: [],
        showMasterPassword: false,
        searchTerm: '',
        showAddForm: false,
        visiblePasswords: {},
        copiedId: null,
        error: '',
        newEntry: {
          title: '',
          username: '',
          password: '',
          url: '',
          category: '',
          notes: ''
        }
      };
      render();
    }

    // Handle add entry
    async function handleAddEntry() {
      if (!state.newEntry.title || !state.newEntry.password) {
        state.error = 'Title and password are required';
        render();
        return;
      }
      
      const entry = {
        ...state.newEntry,
        id: Date.now().toString(),
        createdAt: new Date().toISOString()
      };
      
      const updated = [...state.entries, entry];
      await saveEntries(updated);
      state.newEntry = { title: '', username: '', password: '', url: '', category: '', notes: '' };
      state.showAddForm = false;
      state.error = '';
      render();
    }

    // Handle delete entry
    async function handleDeleteEntry(id) {
      const updated = state.entries.filter(e => e.id !== id);
      await saveEntries(updated);
    }

    // Handle copy password
    function handleCopyPassword(password, id) {
      navigator.clipboard.writeText(password);
      state.copiedId = id;
      render();
      setTimeout(() => {
        state.copiedId = null;
        render();
      }, 2000);
    }

    // Toggle password visibility
    function togglePasswordVisibility(id) {
      state.visiblePasswords[id] = !state.visiblePasswords[id];
      render();
    }

    // Render unlock screen
    function renderUnlockScreen() {
      return `
        <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px;">
          <div class="unlock-container" style="background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(0, 255, 65, 0.2); border-radius: 8px; padding: 60px 50px; max-width: 450px; width: 100%; box-shadow: 0 0 60px rgba(0, 255, 65, 0.15), inset 0 0 30px rgba(0, 0, 0, 0.5); position: relative; overflow: hidden;">
            <div class="scanline"></div>
            
            <div style="text-align: center; margin-bottom: 40px;">
              <div class="shield-icon" style="display: inline-flex; align-items: center; justify-content: center; width: 80px; height: 80px; background: linear-gradient(135deg, #00ff41 0%, #00cc33 100%); border-radius: 50%; margin-bottom: 20px; box-shadow: 0 0 30px rgba(0, 255, 65, 0.4);">
                ${icons.lock}
              </div>
              <h1 style="color: #00ff41; font-size: 32px; font-weight: 700; margin: 0 0 10px 0; letter-spacing: 2px; text-transform: uppercase; text-shadow: 0 0 20px rgba(0, 255, 65, 0.5);">
                VAULT
              </h1>
              <p style="color: #888; font-size: 13px; margin: 0; letter-spacing: 1px;">
                ENCRYPTED PASSWORD MANAGER
              </p>
            </div>

            <div style="margin-bottom: 30px;">
              <label style="display: block; color: #00ff41; font-size: 12px; font-weight: 600; margin-bottom: 10px; letter-spacing: 1px; text-transform: uppercase;">
                Master Password
              </label>
              <div style="position: relative;">
                <input
                  type="${state.showMasterPassword ? 'text' : 'password'}"
                  id="masterPasswordInput"
                  placeholder="Enter your master password"
                  style="width: 100%; padding: 14px 45px 14px 14px; background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(0, 255, 65, 0.3); border-radius: 4px; color: #fff; font-size: 14px; outline: none;"
                />
                <button
                  onclick="state.showMasterPassword = !state.showMasterPassword; render();"
                  style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #666; cursor: pointer; padding: 4px; display: flex; align-items: center;"
                >
                  ${state.showMasterPassword ? icons.eyeOff : icons.eye}
                </button>
              </div>
            </div>

            ${state.error ? `
              <div style="padding: 12px; background: rgba(255, 50, 50, 0.1); border: 1px solid rgba(255, 50, 50, 0.3); border-radius: 4px; color: #ff5050; font-size: 13px; margin-bottom: 20px;">
                ${state.error}
              </div>
            ` : ''}

            <button
              onclick="handleUnlock()"
              style="width: 100%; padding: 16px; background: linear-gradient(135deg, #00ff41 0%, #00cc33 100%); border: none; border-radius: 4px; color: #0a0a0a; font-size: 14px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; cursor: pointer; box-shadow: 0 4px 15px rgba(0, 255, 65, 0.3);"
            >
              <span style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                ${icons.unlock}
                Unlock Vault
              </span>
            </button>

            <div style="margin-top: 30px; padding: 15px; background: rgba(0, 255, 65, 0.05); border: 1px solid rgba(0, 255, 65, 0.1); border-radius: 4px;">
              <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                ${icons.shieldSmall}
                <span style="color: #00ff41; font-size: 12px; font-weight: 600;">Security Notice</span>
              </div>
              <p style="color: #888; font-size: 11px; margin: 0; line-height: 1.5;">
                Your passwords are encrypted with AES-256-GCM encryption and stored locally in your browser. Never share your master password.
              </p>
            </div>
          </div>
        </div>
      `;
    }

    // Render main screen
    function renderMainScreen() {
      const filteredEntries = state.entries.filter(entry => 
        entry.title.toLowerCase().includes(state.searchTerm.toLowerCase()) ||
        (entry.username && entry.username.toLowerCase().includes(state.searchTerm.toLowerCase())) ||
        (entry.category && entry.category.toLowerCase().includes(state.searchTerm.toLowerCase()))
      );

      return `
        <div style="padding: 20px;">
          <div style="max-width: 1200px; margin: 0 auto;">
            <!-- Header -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; padding: 20px 0;">
              <div style="display: flex; align-items: center; gap: 15px;">
                <div style="display: flex; align-items: center; justify-content: center; width: 50px; height: 50px; background: linear-gradient(135deg, #00ff41 0%, #00cc33 100%); border-radius: 50%; box-shadow: 0 0 20px rgba(0, 255, 65, 0.4);">
                  ${icons.shield}
                </div>
                <div>
                  <h1 style="color: #00ff41; font-size: 28px; font-weight: 700; margin: 0; letter-spacing: 2px; text-transform: uppercase;">
                    VAULT
                  </h1>
                  <p style="color: #666; font-size: 12px; margin: 0; letter-spacing: 1px;">
                    ${state.entries.length} ${state.entries.length === 1 ? 'entry' : 'entries'}
                  </p>
                </div>
              </div>
              <button
                onclick="handleLock()"
                style="padding: 12px 24px; background: rgba(255, 50, 50, 0.1); border: 1px solid rgba(255, 50, 50, 0.3); border-radius: 4px; color: #ff5050; font-size: 13px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; cursor: pointer; display: flex; align-items: center; gap: 8px;"
              >
                ${icons.lock}
                Lock Vault
              </button>
            </div>

            <!-- Search and Add -->
            <div style="display: flex; gap: 15px; margin-bottom: 30px;">
              <div style="position: relative; flex: 1;">
                <span style="position: absolute; left: 14px; top: 50%; transform: translateY(-50%); color: #666;">
                  ${icons.search}
                </span>
                <input
                  type="text"
                  id="searchInput"
                  placeholder="Search entries..."
                  style="width: 100%; padding: 14px 14px 14px 45px; background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(0, 255, 65, 0.2); border-radius: 4px; color: #fff; font-size: 14px; outline: none;"
                />
              </div>
              <button
                onclick="state.showAddForm = !state.showAddForm; render();"
                style="padding: 14px 28px; background: ${state.showAddForm ? 'rgba(0, 255, 65, 0.2)' : 'linear-gradient(135deg, #00ff41 0%, #00cc33 100%)'}; border: ${state.showAddForm ? '1px solid #00ff41' : 'none'}; border-radius: 4px; color: ${state.showAddForm ? '#00ff41' : '#0a0a0a'}; font-size: 13px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; cursor: pointer; display: flex; align-items: center; gap: 8px; white-space: nowrap;"
              >
                ${icons.plus}
                Add Entry
              </button>
            </div>

            <!-- Add Form -->
            ${state.showAddForm ? `
              <div style="background: rgba(0, 0, 0, 0.8); border: 1px solid rgba(0, 255, 65, 0.2); border-radius: 8px; padding: 30px; margin-bottom: 30px; box-shadow: 0 0 30px rgba(0, 255, 65, 0.1);">
                <h2 style="color: #00ff41; font-size: 18px; font-weight: 600; margin: 0 0 25px 0; letter-spacing: 1px; text-transform: uppercase;">
                  New Entry
                </h2>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                  <div>
                    <label style="display: block; color: #00ff41; font-size: 11px; font-weight: 600; margin-bottom: 8px; letter-spacing: 1px; text-transform: uppercase;">
                      Title *
                    </label>
                    <input
                      type="text"
                      id="newTitle"
                      placeholder="e.g., Gmail Account"
                      style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(0, 255, 65, 0.2); border-radius: 4px; color: #fff; font-size: 14px; outline: none;"
                    />
                  </div>
                  
                  <div>
                    <label style="display: block; color: #00ff41; font-size: 11px; font-weight: 600; margin-bottom: 8px; letter-spacing: 1px; text-transform: uppercase;">
                      Username / Email
                    </label>
                    <input
                      type="text"
                      id="newUsername"
                      placeholder="your@email.com"
                      style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(0, 255, 65, 0.2); border-radius: 4px; color: #fff; font-size: 14px; outline: none;"
                    />
                  </div>
                  
                  <div>
                    <label style="display: block; color: #00ff41; font-size: 11px; font-weight: 600; margin-bottom: 8px; letter-spacing: 1px; text-transform: uppercase;">
                      Password *
                    </label>
                    <input
                      type="text"
                      id="newPassword"
                      placeholder="••••••••"
                      style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(0, 255, 65, 0.2); border-radius: 4px; color: #fff; font-size: 14px; outline: none;"
                    />
                  </div>
                  
                  <div>
                    <label style="display: block; color: #00ff41; font-size: 11px; font-weight: 600; margin-bottom: 8px; letter-spacing: 1px; text-transform: uppercase;">
                      URL
                    </label>
                    <input
                      type="text"
                      id="newUrl"
                      placeholder="https://example.com"
                      style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(0, 255, 65, 0.2); border-radius: 4px; color: #fff; font-size: 14px; outline: none;"
                    />
                  </div>
                  
                  <div>
                    <label style="display: block; color: #00ff41; font-size: 11px; font-weight: 600; margin-bottom: 8px; letter-spacing: 1px; text-transform: uppercase;">
                      Category
                    </label>
                    <input
                      type="text"
                      id="newCategory"
                      placeholder="e.g., Email, Social, Work"
                      style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(0, 255, 65, 0.2); border-radius: 4px; color: #fff; font-size: 14px; outline: none;"
                    />
                  </div>
                  
                  <div style="grid-column: 1 / -1;">
                    <label style="display: block; color: #00ff41; font-size: 11px; font-weight: 600; margin-bottom: 8px; letter-spacing: 1px; text-transform: uppercase;">
                      Notes
                    </label>
                    <textarea
                      id="newNotes"
                      placeholder="Additional notes..."
                      rows="3"
                      style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(0, 255, 65, 0.2); border-radius: 4px; color: #fff; font-size: 14px; outline: none; resize: vertical;"
                    ></textarea>
                  </div>
                </div>
                
                ${state.error ? `
                  <div style="padding: 12px; background: rgba(255, 50, 50, 0.1); border: 1px solid rgba(255, 50, 50, 0.3); border-radius: 4px; color: #ff5050; font-size: 13px; margin-top: 20px;">
                    ${state.error}
                  </div>
                ` : ''}
                
                <div style="display: flex; gap: 15px; margin-top: 25px;">
                  <button
                    onclick="handleAddEntry()"
                    style="flex: 1; padding: 14px; background: linear-gradient(135deg, #00ff41 0%, #00cc33 100%); border: none; border-radius: 4px; color: #0a0a0a; font-size: 13px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; cursor: pointer;"
                  >
                    Save Entry
                  </button>
                  <button
                    onclick="state.showAddForm = false; state.newEntry = { title: '', username: '', password: '', url: '', category: '', notes: '' }; state.error = ''; render();"
                    style="flex: 1; padding: 14px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 4px; color: #888; font-size: 13px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; cursor: pointer;"
                  >
                    Cancel
                  </button>
                </div>
              </div>
            ` : ''}

            <!-- Entries List -->
            <div style="display: grid; gap: 15px;">
              ${filteredEntries.length === 0 ? `
                <div style="background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(0, 255, 65, 0.1); border-radius: 8px; padding: 60px 20px; text-align: center;">
                  <div style="margin-bottom: 20px;">${icons.shield}</div>
                  <p style="color: #666; font-size: 16px; margin: 0;">
                    ${state.searchTerm ? 'No entries match your search' : 'No entries yet. Click "Add Entry" to get started.'}
                  </p>
                </div>
              ` : filteredEntries.map(entry => `
                <div class="entry-card" style="background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(0, 255, 65, 0.2); border-radius: 8px; padding: 25px;">
                  <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
                    <div style="flex: 1;">
                      <h3 style="color: #00ff41; font-size: 18px; font-weight: 600; margin: 0 0 8px 0; letter-spacing: 1px;">
                        ${entry.title}
                      </h3>
                      ${entry.category ? `
                        <span style="display: inline-block; padding: 4px 10px; background: rgba(0, 255, 65, 0.1); border: 1px solid rgba(0, 255, 65, 0.2); border-radius: 3px; color: #00ff41; font-size: 10px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase;">
                          ${entry.category}
                        </span>
                      ` : ''}
                    </div>
                    <button
                      onclick="handleDeleteEntry('${entry.id}')"
                      style="background: rgba(255, 50, 50, 0.1); border: 1px solid rgba(255, 50, 50, 0.2); border-radius: 4px; color: #ff5050; padding: 8px; cursor: pointer; display: flex; align-items: center;"
                    >
                      ${icons.trash}
                    </button>
                  </div>
                  
                  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    ${entry.username ? `
                      <div>
                        <label style="display: block; color: #666; font-size: 10px; font-weight: 600; margin-bottom: 6px; letter-spacing: 1px; text-transform: uppercase;">
                          Username
                        </label>
                        <div style="color: #fff; font-size: 13px; padding: 8px 12px; background: rgba(0, 0, 0, 0.4); border-radius: 4px; word-break: break-all;">
                          ${entry.username}
                        </div>
                      </div>
                    ` : ''}
                    
                    <div>
                      <label style="display: block; color: #666; font-size: 10px; font-weight: 600; margin-bottom: 6px; letter-spacing: 1px; text-transform: uppercase;">
                        Password
                      </label>
                      <div style="display: flex; gap: 8px;">
                        <div style="flex: 1; color: #fff; font-size: 13px; padding: 8px 12px; background: rgba(0, 0, 0, 0.4); border-radius: 4px; word-break: break-all;">
                          ${state.visiblePasswords[entry.id] ? entry.password : '••••••••••••'}
                        </div>
                        <button
                          onclick="togglePasswordVisibility('${entry.id}')"
                          style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 4px; color: #888; padding: 8px; cursor: pointer; display: flex; align-items: center;"
                        >
                          ${state.visiblePasswords[entry.id] ? icons.eyeOff : icons.eye}
                        </button>
                        <button
                          onclick="handleCopyPassword('${entry.password}', '${entry.id}')"
                          style="background: ${state.copiedId === entry.id ? 'rgba(0, 255, 65, 0.2)' : 'rgba(255, 255, 255, 0.05)'}; border: ${state.copiedId === entry.id ? '1px solid #00ff41' : '1px solid rgba(255, 255, 255, 0.1)'}; border-radius: 4px; color: ${state.copiedId === entry.id ? '#00ff41' : '#888'}; padding: 8px; cursor: pointer; display: flex; align-items: center;"
                        >
                          ${icons.copy}
                        </button>
                      </div>
                    </div>
                    
                    ${entry.url ? `
                      <div>
                        <label style="display: block; color: #666; font-size: 10px; font-weight: 600; margin-bottom: 6px; letter-spacing: 1px; text-transform: uppercase;">
                          URL
                        </label>
                        <a
                          href="${entry.url}"
                          target="_blank"
                          rel="noopener noreferrer"
                          style="display: block; color: #00ff41; font-size: 13px; padding: 8px 12px; background: rgba(0, 0, 0, 0.4); border-radius: 4px; text-decoration: none; word-break: break-all;"
                        >
                          ${entry.url}
                        </a>
                      </div>
                    ` : ''}
                  </div>
                  
                  ${entry.notes ? `
                    <div style="margin-top: 15px;">
                      <label style="display: block; color: #666; font-size: 10px; font-weight: 600; margin-bottom: 6px; letter-spacing: 1px; text-transform: uppercase;">
                        Notes
                      </label>
                      <div style="color: #aaa; font-size: 13px; padding: 8px 12px; background: rgba(0, 0, 0, 0.4); border-radius: 4px; line-height: 1.6;">
                        ${entry.notes}
                      </div>
                    </div>
                  ` : ''}
                </div>
              `).join('')}
            </div>
          </div>
        </div>
      `;
    }

    // Main render function
    function render() {
      const app = document.getElementById('app');
      
      if (!state.isUnlocked) {
        app.innerHTML = renderUnlockScreen();
        
        // Add event listener for Enter key on password input
        setTimeout(() => {
          const input = document.getElementById('masterPasswordInput');
          if (input) {
            input.value = state.masterPassword;
            input.addEventListener('input', (e) => {
              state.masterPassword = e.target.value;
            });
            input.addEventListener('keypress', (e) => {
              if (e.key === 'Enter') {
                handleUnlock();
              }
            });
          }
        }, 0);
      } else {
        app.innerHTML = renderMainScreen();
        
        // Add event listeners for form inputs
        setTimeout(() => {
          const searchInput = document.getElementById('searchInput');
          if (searchInput) {
            searchInput.value = state.searchTerm;
            searchInput.addEventListener('input', (e) => {
              state.searchTerm = e.target.value;
              render();
            });
          }
          
          if (state.showAddForm) {
            const newTitle = document.getElementById('newTitle');
            const newUsername = document.getElementById('newUsername');
            const newPassword = document.getElementById('newPassword');
            const newUrl = document.getElementById('newUrl');
            const newCategory = document.getElementById('newCategory');
            const newNotes = document.getElementById('newNotes');
            
            if (newTitle) {
              newTitle.value = state.newEntry.title;
              newTitle.addEventListener('input', (e) => {
                state.newEntry.title = e.target.value;
              });
            }
            
            if (newUsername) {
              newUsername.value = state.newEntry.username;
              newUsername.addEventListener('input', (e) => {
                state.newEntry.username = e.target.value;
              });
            }
            
            if (newPassword) {
              newPassword.value = state.newEntry.password;
              newPassword.addEventListener('input', (e) => {
                state.newEntry.password = e.target.value;
              });
            }
            
            if (newUrl) {
              newUrl.value = state.newEntry.url;
              newUrl.addEventListener('input', (e) => {
                state.newEntry.url = e.target.value;
              });
            }
            
            if (newCategory) {
              newCategory.value = state.newEntry.category;
              newCategory.addEventListener('input', (e) => {
                state.newEntry.category = e.target.value;
              });
            }
            
            if (newNotes) {
              newNotes.value = state.newEntry.notes;
              newNotes.addEventListener('input', (e) => {
                state.newEntry.notes = e.target.value;
              });
            }
          }
        }, 0);
      }
    }

    // Initial render
    render();
  </script>
</body>
</html>
